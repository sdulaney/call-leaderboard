<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Brokerage Dashboard</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="icon" type="image/png" href="dist/img/favicon-32x32.png" sizes="32x32" />
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/skin-blue-light.min.css">
  <link rel="stylesheet" href="bower_components/chartist/dist/chartist.css">
  <link rel="stylesheet" href="bower_components/fullcalendar/dist/fullcalendar.min.css">
  <link rel="stylesheet" href="bower_components/fullcalendar/dist/fullcalendar.print.css" media="print">
  <link rel="stylesheet" href="dist/css/animate.css">
  <style>
    .ct-series-a .ct-bar {
        /* Colour of your bars */
        /*stroke:  #e76120;*/
        stroke: url(#gradient);
        stroke-width: 1em;
    }

    @media (min-width: 3000px) {
    /* CSS that should be displayed if width is equal to or less than 800px goes here */
          .ct-series-a .ct-bar {
              stroke-width: 3em;
          }
          html {
              font-size: 75%;
          }
          .ct-label {
              font-size: 3rem;
          }
          .box-header .box-title {
              font-size: 250%;
          }
          .dashboard-title {
              font-size: 175%;
          }
          .dashboard-logo {
              height: 150px;
          }
    }

    @media (max-width: 500px) {
    /* CSS that should be displayed if width is equal to or less than 800px goes here */
          .ct-series-a .ct-bar {
              stroke-width: 0.5em;
          }
          .ct-label {
              font-size: 0.60rem;
          }
    }

    @media (min-width: 501px){
        .ct-label {
            font-size: 1rem;
        }
    }

    .ct-label {
        color: #58585a;
    }
    .ct-chart {
        padding: 10px 10px 10px 10px;
    }
    .box, .box-footer {
        /*background: -webkit-linear-gradient(90deg, #dee1e1 10%, #f4f4f4 90%) !important;*/
    }
  </style>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- jQuery 2.2.3 -->
  <script src="plugins/jQuery/jquery-2.2.3.min.js"></script>
  <!-- Bootstrap 3.3.6 -->
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <!-- SlimScroll -->
  <script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
  <!-- FastClick -->
  <script src="plugins/fastclick/fastclick.js"></script>
  <!-- AdminLTE App -->
  <script src="dist/js/app.min.js"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="dist/js/demo.js"></script>
  <!-- <script src="bower_components/modernizr/src/modernizr.js"></script> -->
  <script src="bower_components/tabletop/src/tabletop.js"></script>
  <script src="bower_components/d3/d3.min.js"></script>
  <script src="bower_components/c3/c3.min.js"></script>
  <script src="bower_components/chart.js/dist/Chart.bundle.js"></script>
  <script src="bower_components/Chart.HorizontalBar.js/Chart.HorizontalBar.js"></script>


</head>
 <body class="skin-blue-light hold-transition sidebar-mini sidebar-collapse">

<!-- Site wrapper -->
<div class="wrapper">

  <header class="main-header">
    <!-- Logo -->
    <a href="index.html" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <!-- <span class="logo-mini"><b>A</b>LT</span> -->
      <span class="logo-mini"><img src="dist/img/concord.png" height="30px"></span>
      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg"><img src="dist/img/logo.png" height="32px"></span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </nav>
  </header>

  <!-- =============================================== -->

  <!-- Left side column. contains the sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- sidebar menu: : style can be found in sidebar.less -->
      <ul class="sidebar-menu">
        <li class="header">MAIN NAVIGATION</li>
        <li class="treeview">
          <a href="#">
            <i class="fa fa-dashboard"></i> <span>Dashboard</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#">
            <i class="fa fa-pie-chart"></i>
            <span>Charts</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#">
            <i class="fa fa-table"></i> <span>Tables</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class="fa fa-calendar"></i> <span>Calendar</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#">
            <i class="fa fa-folder"></i> <span>Documents</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li><a href="https://docs.google.com/spreadsheets/d/1lvQ3NGvU7PGbPWwuYzccblFPCnY-ln00EJO0IO1Bacc/edit?usp=sharing"><i class="fa fa-circle-o"></i> Leaderboard back end</a></li>
            <li><a href="https://calendar.google.com/calendar/embed?src=concordpropertybase%40gmail.com&ctz=America/Los_Angeles"><i class="fa fa-circle-o"></i> Calendar back end</a></li>
          </ul>
        </li>
      </ul>
    </section>
    <!-- /.sidebar -->
  </aside>

  <!-- =============================================== -->

  <!-- Content Wrapper. Contains page content -->
  <div id="main" role="main" class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header" style="text-align:center;">
      <h1>
        <span class="dashboard-title"><span><img src="dist/img/concord_logo.png" class="dashboard-logo animated infinite pulse" height="40px"></span></span>
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Brokerage Dashboard</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-md-8">
                <div class="box box-primary">
                  <div class="box-header with-border">

                    <h3 class="box-title"><i class="fa fa-bar-chart-o"></i> Live Call Leaderboard</h3>

                    <div class="box-tools pull-right">
                      <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                        <i class="fa fa-minus"></i></button>
                      <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                        <i class="fa fa-times"></i></button>
                    </div>
                  </div>
                  <div class="box-body">
                    <div class="ct-chart ct-perfect-fifth" id="chart1"></div>
                    <script src="bower_components/chartist/dist/chartist.js"></script>
                    <!-- <script src="bower_components/chartist-plugin-axistitle/dist/chartist-plugin-axistitle.js"></script> -->
                    <script src="bower_components/chartist-plugin-pointlabels/dist/chartist-plugin-pointlabels.js"></script>
                    <script>
                    window.onload = function() { init() };

                    function init() {
                        console.log("Populating chart...");
                        var agents = [];
                        var call_counts = [];
                         var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/1lvQ3NGvU7PGbPWwuYzccblFPCnY-ln00EJO0IO1Bacc/pubhtml?gid=1925952226&single=true';
                        //var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/1hriSgPMcEnjEOaAZ3d0gGMPtkt_dUU1edTkspvoveDk/pubhtml?gid=0&single=true';


                        function showInfo(data, tabletop) {
                            for (var i = 0; i < data.length; i++) {
                                agents.push(data[i].Agent);
                                call_counts.push(data[i]['Call Count']);

                            }
                            console.log(agents);
                            console.log(call_counts);

                            var chart = new Chartist.Bar('#chart1', {
                                labels: agents,
                                series: [
                                    call_counts
                                ]
                                }, {
                                seriesBarDistance: 10,
                                reverseData: true,
                                horizontalBars: true,
                                axisY: {
                                offset: 70
                                },
                                axisX: {
                                onlyInteger: true
                                // ticks: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100]
                                }} ).on('draw', function(data) {
                                  if(data.type === 'bar') {
                                    var barHorizontalCenter, barVerticalCenter, label, value;
                                      if (data.type === "bar") {
                                          // To support gradient color - http://jsbin.com/nihujepoxi/edit?css,js,output
                                         data.element.attr({
                                              y1: data.y1 + 0.001
                                         })
                                          // Animate bars
                                          data.element.animate({
                                            x2: {
                                                begin: 0,
                                                dur: 1000,
                                                from: data.x1,
                                                to: data.x2
                                            }
                                        }, false);
                                          // Adds bar value labels - https://github.com/gionkunz/chartist-js/issues/281
                                          barHorizontalCenter = data.x1 + (data.element.width())-3;
                                          barVerticalCenter = data.y1+3.5;
                                        value = data.element.attr('ct:value');
                                        if (value !== '0') {
                                          label = new Chartist.Svg('text');
                                          label.text(value);
                                          label.addClass("ct-barlabel");
                                          if(screen.width > 3000){
                                              barVerticalCenter = data.y1+5;
                                              label.attr({
                                                x: barHorizontalCenter,
                                                y: barVerticalCenter,
                                                'text-anchor': 'end',
                                                style: "fill: #ffffff; font-size: 125%;"
                                              });
                                          }
                                          else if(screen.width <= 500){
                                              barVerticalCenter = data.y1+2.5;
                                              label.attr({
                                                x: barHorizontalCenter,
                                                y: barVerticalCenter,
                                                'text-anchor': 'end',
                                                style: "fill: #ffffff; font-size: 50%;"
                                              });
                                          }
                                          else {
                                          label.attr({
                                            x: barHorizontalCenter,
                                            y: barVerticalCenter,
                                            'text-anchor': 'end',
                                            style: "fill: #ffffff; font-size: 75%;"
                                          });
                                        }
                                          return data.group.append(label);
                                        }
                                      }
                                    }
                            });
                            chart.on('created', function(data) {
                                var defs = data.svg.elem('defs');
                                defs.elem('linearGradient', {
                                  id: 'gradient',
                                  x1: 0,
                                  y1: 0,
                                  x2: 1,
                                  y2: 0
                              }).elem('stop', {
                                  offset: 0,
                                  'stop-color': 'hsla(30, 100%, 50%, 1)'
                              }).parent().elem('stop', {
                                  offset: 1,
                                  'stop-color': 'hsla(33, 100%, 50%, 1)'
                                });
                            });
                            chart.on('created', function(context) {
                              console.log(context.axisX.bounds.high);
                            });
                        }
                        Tabletop.init( { key: public_spreadsheet_url, callback: showInfo, simpleSheet: true } )
                        console.log("Repopulating calendar...");
                        $('#calendar').fullCalendar('refetchEventSources', { googleCalendarId:'concordpropertybase@gmail.com' });
                    }

                    //Re-populate the chart every 15 seconds
                    window.setInterval(function(){
                        init();
                    }, 600000);
                    </script>
                  </div>
                  <!-- ./box-body -->
                  <!-- <div class="box-footer">
                    Footer
                  </div> -->
                  <!-- /.box-footer-->
                </div>
                <!-- /.box -->
            </div>

            <div class="col-md-4">
                <div class="box box-info box-solid">
                    <div class="box-header with-border bg-blue-gradient">

                      <h3 class="box-title"><i class="fa fa-calendar"></i> Calendar</h3>

                      <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                          <i class="fa fa-minus"></i></button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                          <i class="fa fa-times"></i></button>
                      </div>
                    </div>
                    <div class="box-body">
                    <!-- THE CALENDAR -->
                        <div id="calendar"></div>
                    </div>
                    <!-- /.box-body -->
                    <!-- <div class="box-footer">
                    </div> -->
                    <!-- /.box-footer-->
                    </div>
                <!-- /. box -->


            <!-- Default box -->
                <!-- <div class="box box-solid">
              <div class="box-header">
                <h3 class="box-title">Title</h3>

                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                    <i class="fa fa-minus"></i></button>
                  <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                    <i class="fa fa-times"></i></button>
                </div>
              </div>
              <div class="box-body">
                    <div class="ct-chart" id="chart2" style="height:550px;"></div>
                        <script>
                            var chart = new Chartist.Line('#chart2', {
                            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                            series: [
                            [1, 5, 2, 5, 4, 3],
                            [2, 3, 4, 8, 1, 2],
                            [5, 4, 3, 2, 1, 0.5]
                            ]
                            }, {
                            low: 0,
                            showArea: true,
                            showPoint: false,
                            fullWidth: true
                            });

                            chart.on('draw', function(data) {
                            if(data.type === 'line' || data.type === 'area') {
                            data.element.animate({
                              d: {
                                begin: 2000 * data.index,
                                dur: 2000,
                                from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),
                                to: data.path.clone().stringify(),
                                easing: Chartist.Svg.Easing.easeOutQuint
                              }
                            });
                            }
                            });
                        </script>
                    </div>
                    <div class="box-footer">
                      Footer
                    </div>
                </div>-->
               <!-- </div> -->
            <!-- </div> -->
            </div>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->






  <footer class="main-footer">
    <div class="pull-right hidden-xs">
      <b>Version</b> 1.0
    </div>
    <strong>Concord Real Estate Services</strong>
  </footer>

</div>
<!-- ./wrapper -->
    <script src="dist/js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
    <script src="bower_components/fullcalendar/dist/fullcalendar.min.js"></script>
    <script src="bower_components/fullcalendar/dist/gcal.js"></script>
    <!-- Page specific script -->
    <script>
    $(document).ready(function() {
        var date = new Date();
            var d = date.getDate(),
                m = date.getMonth(),
                y = date.getFullYear();
        var calendar = $('#calendar').fullCalendar({
            googleCalendarApiKey: 'AIzaSyD68k6jqGtTojbTmJpBFV13co6w8MlXBsU',
            header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
            },
            buttonText: {
                    today: 'today',
                    month: 'month',
                    week: 'week',
                    day: 'day'
            },
            events: {
                googleCalendarId: 'concordpropertybase@gmail.com'
            }
        });
    });

    </script>
    <link rel="stylesheet" href="dist/css/myStyles.css">
</body>





</html>
